@using Template.WebUI.Components;

<header class="flex flex-row justify-between items-center w-full h-16 fixed top-0 left-0 bg-gray-100">

    @* Desktop *@
    <div class="hidden lg:flex flex-row ml-4 gap-4">

        <a class="flex flex-row gap-2 items-center" href="/">

            <div class="logo">
                <img src="/img/appLogo.svg" />
            </div>

            <p class="h-min text-zinc-500 font-bold text-2xl">Quill</p>
        </a>

        <nav class="flex flex-row gap-4 justify-between items-center">

            <AuthorizeView Roles="Admin, User">
                <Authorized>
                    <NavLink class="text-zinc-600" href="/categories">
                        Categories
                    </NavLink>
                </Authorized>
            </AuthorizeView>

            <AuthorizeView Roles="Admin, User">
                <Authorized>
                    <NavLink class="text-zinc-600" href="/folders">
                        Folders
                    </NavLink>
                </Authorized>
            </AuthorizeView>
            
        </nav>

    </div>

    <div class="hidden lg:flex flex-row">

        <AuthorizeView>
            <Authorized>
                <a class="text-zinc-500 text-xl font-bold hover:bg-yellow-100 px-2 py-1 rounded block mr-2" href="/account">
                    @context.User.Identity.Name
                </a>
            </Authorized>
            <NotAuthorized>
                <button class="text-zinc-500 text-xl font-bold hover:bg-yellow-100 px-2 py-1 rounded block mr-2" @onclick="ShowLoginModal">
                    Sign in
                </button>
            </NotAuthorized>
        </AuthorizeView>

    </div>

    @* Mobile *@
    <nav class="text-zinc-600 flex flex-row w-full justify-between px-6 lg:hidden">

        <NavLink class="text-xl font-bold" href="/">
            <i class="fa-solid fa-house"></i>
        </NavLink>

        <NavLink class="text-xl font-bold" href="/categories">
            <i class="fa-solid fa-list"></i>
        </NavLink>

        <NavLink class="text-xl font-bold" href="/folders">
            <i class="fa-solid fa-folder"></i>
        </NavLink>

        <AuthorizeView>

            <Authorized>
                <a class="text-zinc-600 text-xl font-bold rounded block" href="/account">
                    <i class="fa-solid fa-user"></i>
                </a>
            </Authorized>

            <NotAuthorized>
                <button class="text-zinc-600 text-xl font-bold rounded block" @onclick="ShowLoginModal">
                    <i class="fa-solid fa-right-to-bracket"></i>
                </button>
            </NotAuthorized>

        </AuthorizeView>
    </nav>

</header>

<LoginModal @ref="_loginModal" />

@code {

    [CascadingParameter]
    private Task<AuthenticationState> AuthenticationState { get; set; }

    private LoginModal _loginModal;

    private void ShowLoginModal()
    {
        _loginModal.ToggleModal();
    }

}